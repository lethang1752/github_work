export PATH=$PATH:$ORACLE_HOME/OPatch

srvctl config database -d db-unique-name(pri)
srvctl stop database -d (pri + standby)
ps -ef|grep smon
export SID=corerlt
sqlplus
select name from v$database;
shutdown imme;
exit;

export sid bpmdb1;
select name from v$database;
shutdown imme;
exit;
lsnrctl stat;
lsnrctl stop;

sudo su; -> root
su - grid
env|grep ORA
lsnrctl stat
lsnrctl stop
exit

su - oracle
lsnrctl stat
cd $oracle_home/Opatch
./opatch version
cd /mnt/remoteshare02/***
ls
cd $oracle_home/opatch
./opatch prereq checkconflictagainstohwithdetail -ph
./opatch prereq checksystemspace -ph /mnt/remoteshare02/***/
./opatch apply /mnt/remoteshare02/***/ -oh /u01/app/oracle/product/12./dbhome_
y
./opatch apply /mnt/remoteshare02/***/ -oh /u01/app/oracle/product/12./dbhome_
y
y (backing up file..)

(patch success)

cd /mnt/remoteshare02/***/***
pwd
ls
cd $oracle_home/opatch

./opatch prereq checkconflictagainstohwithdetail -ph
./opatch prereq checksystemspace -ph /mnt/remoteshare02/***/
./opatch apply /mnt/remoteshare02/***/*** -oh /u01/app/oracle/product/12./dbhome_ -analyze
./opatch apply /mnt/remoteshare02/***/*** -oh /u01/app/oracle/product/12./dbhome_ -analyze

(opatch fail error code 73)

(-> check log error: more ////)

cd $oracle_home/bin (???)
mv kfod kfod.bk (???)
mv srvconfig srvconfig.bk (???)

cd $oracle_home/opatch
.opatch apply....
y
y
(succeeded)

.opatch apply....
y
y
(succeeded)

(oracle) ./opatch lspatches

exit

su - grid
env | grep ORA
exit
(root) env|grep ORA
cd /u01/app/18./grid/bin
ps -ef|grep smon
env|grep ORA
/u01/app/18./grid/bin start...

./crsctl config crs (CRS-4622)
./crsctl disable crs
./crsctl config crs
./crsctl stop crs
./crsctl check crs
./crsctl stat res -t
./crsctl config crs
lsmem
ps -ef|grep smon
ps -ef|grep pmon

(login to node2)

(oracle) lsmem
cat /proc/meminfo
cat /etc/hosts | more
hostname
df -h
(10.1.4.100)
(xm list ?)
xm info|grep free_memory
cd /exavmimages/guestimages
ls
cd ....
ls
cp vm.cfg vm.cfg_220611.backup
vi vm.... (fix memory, maxmem)
xm create ./vm.cfg
xm lists
xm -h|grep conso
xm console ...

(203-oracle)
lsmem
cat /proc/meminfo
cat /etc/sysctl.conf|grep huge
free -g
sudo su 
(root)
cd /u01/app/18./grid/bin
./crsctl stat res -t
./crsctl start crs
./crsctl stat res -t
./crsctl check crs
./crsctl stat res -t
su - oracle
ps -ef|grep smon
srvctl config database -d ...
export sid=...
sqlplus
startup mount;

alter database open
exit
srvctl config database -d ...
export sid=...
sqlplus
startup
exit

su - grid
lsnrctl stat

--------------------------------------

